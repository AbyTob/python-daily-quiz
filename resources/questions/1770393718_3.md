# Python Quiz Question
    
    ## Question
    [QUESTION]
You are tasked with creating a decorator that can be applied to any function to measure the execution time of the function. However, this decorator should only work for functions that return a string. If the returned value is not a string, it should raise a TypeError.

Here's a partial implementation of such a decorator:

```python
import time

def time_if_string(func):
    def wrapper(*args, **kwargs):
        start_time = time.time()
        result = func(*args, **kwargs)
        end_time = time.time()
        
        if not isinstance(result, str):
            raise TypeError("Function must return a string")
            
        print(f"Execution time: {end_time - start_time} seconds")
        return result
    return wrapper

@time_if_string
def sample_function():
    import time
    time.sleep(2)
    return "Hello, World!"

# Test the decorator
try:
    print(sample_function())
except TypeError as e:
    print(e)
```

Which of the following modifications should be made to the `time_if_string` decorator to ensure it works correctly?

A) Remove the check for the type of the result.
B) Decorate the function before defining it.
C) Use a context manager instead of a wrapper function.
D) Ensure that the returned value is checked before printing the execution time.
    
    ## Answer
    [ANSWER] D) Ensure that the returned value is checked before printing the execution time.

Explanation: The current implementation of `time_if_string` checks the type of the result and then prints the execution time. If an exception occurs, it does not handle it properly. By ensuring that the return value check is performed after calculating the execution time but before printing it, we ensure that the error handling works correctly when an invalid return type is encountered.
    
    ---
    *Generated on: 2026-02-06 16:01:58*
    