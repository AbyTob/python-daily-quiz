# Python Quiz Question
    
    ## Question
    [QUESTION]
Consider the following Python code that aims to create a decorator for asynchronous functions. The goal is to measure the execution time of these functions.

```python
import asyncio
from datetime import datetime

def timing_decorator(func):
    async def wrapper(*args, **kwargs):
        start_time = datetime.now()
        result = await func(*args, **kwargs)
        end_time = datetime.now()
        print(f"{func.__name__} took {end_time - start_time} to execute.")
        return result
    return wrapper

@timing_decorator
async def async_task(n):
    await asyncio.sleep(n)
    return n

# Example usage
loop = asyncio.get_event_loop()
result = loop.run_until_complete(async_task(2))
print(result)
```

What issue might arise when running this code, and how could it be fixed?

A) The decorator does not handle `async` functions correctly.
B) The `wrapper` function should be defined as a regular synchronous function instead of an asynchronous one.
C) The `datetime.now()` method is not compatible with asyncio timing.
D) The decorator will work perfectly fine without any modifications.
    
    ## Answer
    A) The decorator does not handle `async` functions correctly.

The correct answer is A. The issue with the provided code is that the `wrapper` function is defined as an asynchronous function (`async def wrapper`). When using a decorator on an async function, it must return another async function to ensure proper handling of the coroutine execution. To fix this, you should define the `wrapper` function as synchronous:

```python
def timing_decorator(func):
    def wrapper(*args, **kwargs):
        start_time = datetime.now()
        result = func(*args, **kwargs)
        end_time = datetime.now()
        print(f"{func.__name__} took {end_time - start_time} to execute.")
        return result
    return wrapper
```

By making the `wrapper` function synchronous, it can correctly handle the execution of async functions and measure their timing properly.
    
    ---
    *Generated on: 2025-11-18 16:01:58*
    