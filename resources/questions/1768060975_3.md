# Python Quiz Question
    
    ## Question
    **Part 1 (Question):**

You are tasked with creating a Python script that logs the execution time of functions. You decide to use decorators for this purpose. However, you also need to ensure that the decorator does not interfere with the function's behavior or its ability to handle exceptions. Here is your initial attempt:

```python
import functools
import time

def log_execution_time(func):
    @functools.wraps(func)
    def wrapper(*args, **kwargs):
        start_time = time.time()
        try:
            result = func(*args, **kwargs)
        finally:
            end_time = time.time()
            print(f"{func.__name__} executed in {end_time - start_time:.4f}s")
        return result
    return wrapper

@log_execution_time
def compute_sum(n):
    """Computes the sum of numbers from 1 to n."""
    return sum(range(1, n + 1))

if __name__ == "__main__":
    try:
        print(compute_sum(1000000))
    except Exception as e:
        print(f"An error occurred: {e}")
```

The decorator `log_execution_time` is supposed to measure the execution time of any function it decorates. However, you notice that when an exception occurs within a decorated function, the log message is printed even though the function did not complete successfully. Modify the `log_execution_time` decorator so that it only logs the execution time if the function completes successfully (i.e., without raising an exception).
    
    ## Answer
    **Part 2 (Answer):**

A

The correct answer is A: The provided code is already correctly handling exceptions within the decorated functions. The `try-except-finally` block ensures that even if an exception occurs, the execution time is still logged before re-raising the exception.

```python
import functools
import time

def log_execution_time(func):
    @functools.wraps(func)
    def wrapper(*args, **kwargs):
        start_time = time.time()
        try:
            result = func(*args, **kwargs)
        except Exception as e:
            end_time = time.time()
            print(f"{func.__name__} executed in {end_time - start_time:.4f}s")
            raise e
        finally:
            end_time = time.time()
            print(f"{func.__name__} executed in {end_time - start_time:.4f}s")
        return result
    return wrapper

@log_execution_time
def compute_sum(n):
    """Computes the sum of numbers from 1 to n."""
    return sum(range(1, n + 1))

if __name__ == "__main__":
    try:
        print(compute_sum(1000000))
    except Exception as e:
        print(f"An error occurred: {e}")
```

This code will correctly log the execution time of `compute_sum` only if it completes successfully. If an exception occurs, it will be logged and then re-raised.
    
    ---
    *Generated on: 2026-01-10 16:02:55*
    